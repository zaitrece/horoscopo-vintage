<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Horóscopo Vintage</title>
<style>
body{margin:0;background:#f4efe6;color:#222;font-family:system-ui,Segoe UI,Roboto,Arial;padding:20px}
h1{text-align:center;background:#1b1b1b;color:#f7ead9;padding:16px;border-bottom:4px solid #c2352b;margin:-20px -20px 20px}
.container{max-width:860px;margin:0 auto;display:grid;gap:12px}
.card{background:#fff;border:2px solid #1b1b1b;border-radius:12px;padding:14px;box-shadow:6px 6px 0 #1b1b1b}
select,button{padding:10px 12px;border:2px solid #1b1b1b;border-radius:12px;background:#f7ead9;font-weight:700}
#resultado{white-space:pre-wrap;line-height:1.6}
.small{color:#666;font-size:12px}
</style>
</head>
<body>
  <h1>Horóscopo Vintage</h1>

  <div class="container">
    <section class="card">
      <label for="signo">Tu signo</label>
      <select id="signo">
        <option>Aries</option><option>Tauro</option><option>Géminis</option>
        <option>Cáncer</option><option>Leo</option><option>Virgo</option>
        <option>Libra</option><option>Escorpio</option><option>Sagitario</option>
        <option>Capricornio</option><option>Acuario</option><option>Piscis</option>
      </select>
      <button onclick="cargar()">Ver horóscopo</button>
      <div class="small">Si no hay datos del día, se mostrará un texto automático.</div>
    </section>

    <section class="card">
      <article id="resultado">Elige un signo y pulsa “Ver horóscopo”.</article>
    </section>
  </div>

<script>
const MAP = {
  "Aries":"aries","Tauro":"taurus","Géminis":"gemini","Cáncer":"cancer","Leo":"leo","Virgo":"virgo",
  "Libra":"libra","Escorpio":"scorpio","Sagitario":"sagittarius","Capricornio":"capricorn",
  "Acuario":"aquarius","Piscis":"pisces"
};
const DEMO = {
  current_date: new Date().toLocaleDateString("es-ES"),
  description: "Hoy la energía te favorece para ordenar prioridades y tomar decisiones sencillas.",
  compatibility: "—", mood: "—", color: "—"
};

async function cargar(){
  const signoES = document.getElementById("signo").value;
  const key = MAP[signoES];
  const out = document.getElementById("resultado");
  out.textContent = "Cargando...";

  try{
    const r = await fetch(`data/latest.json?v=${Date.now()}`, {cache:"no-store"});
    if(!r.ok) throw new Error("No se pudo abrir latest.json");
    const all = await r.json();
    const d = all[key] || {};

    const date = (d.current_date||"").trim() || DEMO.current_date;
    const desc = (d.description||"").trim() || DEMO.description;
    const comp = (d.compatibility||"").trim() || DEMO.compatibility;
    const mood = (d.mood||"").trim() || DEMO.mood;
    const color = (d.color||"").trim() || DEMO.color;

    out.textContent = `${signoES.toUpperCase()} — ${date}\n\n${desc}\n\nCompatibilidad: ${comp}\nHumor: ${mood}\nColor: ${color}`;
  }catch(e){
    out.textContent = `${signoES.toUpperCase()} — ${DEMO.current_date}\n\n${DEMO.description}\n\nCompatibilidad: ${DEMO.compatibility}\nHumor: ${DEMO.mood}\nColor: ${DEMO.color}`;
  }
}
</script>
</body>
</html>
